import{b as z}from"../chunks/paths.7df1d7a5.js";import{s as Y,j as Z,k as P}from"../chunks/scheduler.b5980d7e.js";import{S as x,i as ee,g as A,s as y,r as d,E as te,h as q,f as p,c as C,u as w,k as D,z as E,a as $,v as k,b as G,d as h,t as g,w as b,e as M,p as J,q as N,m as S,j as O,n as V,o as j}from"../chunks/index.ffe372b4.js";import{a as R,u as ne,o as ae,j as T,s as I,g as U}from"../chunks/index.da52130c.js";import{E as se}from"../chunks/edit.ffce0ce6.js";import{I as F,a as le,P as H,D as re}from"../chunks/plusRounded.2a3bf52c.js";import{U as L}from"../chunks/UpdateCharge.ab67ecac.js";import{I as K,a as Q}from"../chunks/ItemEntry.2d2f0d3c.js";function ie({url:o}){return{title:"Template",type:"sub",backURL:o.searchParams.get("home")?`${z}/`:`${z}/settings/`}}const we=Object.freeze(Object.defineProperty({__proto__:null,load:ie},Symbol.toStringTag,{value:"Module"}));function W(o,n,r){const e=o.slice();return e[9]=n[r],e}function oe(o){let n,r=o[9].name+"",e,c,s,i=o[9].value+"",f,u,_=o[1].currency+"",t;return{c(){n=A("h2"),e=S(r),c=y(),s=A("p"),f=S(i),u=y(),t=S(_),this.h()},l(a){n=q(a,"H2",{class:!0});var l=O(n);e=V(l,r),l.forEach(p),c=C(a),s=q(a,"P",{class:!0});var m=O(s);f=V(m,i),u=C(m),t=V(m,_),m.forEach(p),this.h()},h(){D(n,"class","svelte-k3dwag"),D(s,"class","svelte-k3dwag")},m(a,l){$(a,n,l),E(n,e),$(a,c,l),$(a,s,l),E(s,f),E(s,u),E(s,t)},p(a,l){l&2&&r!==(r=a[9].name+"")&&j(e,r),l&2&&i!==(i=a[9].value+"")&&j(f,i),l&2&&_!==(_=a[1].currency+"")&&j(t,_)},d(a){a&&(p(n),p(c),p(s))}}}function ce(o){let n,r,e,c,s,i;function f(){return o[6](o[9])}n=new Q({props:{clickCallback:f,$$slots:{default:[oe]},$$scope:{ctx:o}}});function u(){return o[7](o[9])}e=new F({props:{type:"edit",isVisible:o[0]===o[9].id,clickCallback:u,icon:se}});function _(){return o[8](o[9])}return s=new F({props:{type:"delete",isVisible:o[0]===o[9].id,clickCallback:_,icon:le}}),{c(){d(n.$$.fragment),r=y(),d(e.$$.fragment),c=y(),d(s.$$.fragment)},l(t){w(n.$$.fragment,t),r=C(t),w(e.$$.fragment,t),c=C(t),w(s.$$.fragment,t)},m(t,a){k(n,t,a),$(t,r,a),k(e,t,a),$(t,c,a),k(s,t,a),i=!0},p(t,a){o=t;const l={};a&2&&(l.clickCallback=f),a&4098&&(l.$$scope={dirty:a,ctx:o}),n.$set(l);const m={};a&3&&(m.isVisible=o[0]===o[9].id),a&2&&(m.clickCallback=u),e.$set(m);const v={};a&3&&(v.isVisible=o[0]===o[9].id),a&2&&(v.clickCallback=_),s.$set(v)},i(t){i||(h(n.$$.fragment,t),h(e.$$.fragment,t),h(s.$$.fragment,t),i=!0)},o(t){g(n.$$.fragment,t),g(e.$$.fragment,t),g(s.$$.fragment,t),i=!1},d(t){t&&(p(r),p(c)),b(n,t),b(e,t),b(s,t)}}}function B(o,n){let r,e,c;return e=new K({props:{$$slots:{default:[ce]},$$scope:{ctx:n}}}),{key:o,first:null,c(){r=M(),d(e.$$.fragment),this.h()},l(s){r=M(),w(e.$$.fragment,s),this.h()},h(){this.first=r},m(s,i){$(s,r,i),k(e,s,i),c=!0},p(s,i){n=s;const f={};i&4099&&(f.$$scope={dirty:i,ctx:n}),e.$set(f)},i(s){c||(h(e.$$.fragment,s),c=!0)},o(s){g(e.$$.fragment,s),c=!1},d(s){s&&p(r),b(e,s)}}}function fe(o){let n,r,e;var c=H;function s(i,f){return{}}return c&&(n=N(c,s())),{c(){n&&d(n.$$.fragment),r=M()},l(i){n&&w(n.$$.fragment,i),r=M()},m(i,f){n&&k(n,i,f),$(i,r,f),e=!0},p(i,f){if(c!==(c=H)){if(n){J();const u=n;g(u.$$.fragment,1,0,()=>{b(u,1)}),G()}c?(n=N(c,s()),d(n.$$.fragment),h(n.$$.fragment,1),k(n,r.parentNode,r)):n=null}},i(i){e||(n&&h(n.$$.fragment,i),e=!0)},o(i){n&&g(n.$$.fragment,i),e=!1},d(i){i&&p(r),n&&b(n,i)}}}function ue(o){let n,r;return n=new Q({props:{clickCallback:o[5],centered:!0,$$slots:{default:[fe]},$$scope:{ctx:o}}}),{c(){d(n.$$.fragment)},l(e){w(n.$$.fragment,e)},m(e,c){k(n,e,c),r=!0},p(e,c){const s={};c&4096&&(s.$$scope={dirty:c,ctx:e}),n.$set(s)},i(e){r||(h(n.$$.fragment,e),r=!0)},o(e){g(n.$$.fragment,e),r=!1},d(e){b(n,e)}}}function me(o){let n,r,e=[],c=new Map,s,i,f,u=R(o[1].template.charges);const _=t=>t[9].id;for(let t=0;t<u.length;t+=1){let a=W(o,u,t),l=_(a);c.set(l,e[t]=B(l,a))}return i=new K({props:{$$slots:{default:[ue]},$$scope:{ctx:o}}}),{c(){n=A("meta"),r=y();for(let t=0;t<e.length;t+=1)e[t].c();s=y(),d(i.$$.fragment),this.h()},l(t){const a=te("svelte-1obnm6c",document.head);n=q(a,"META",{name:!0,content:!0}),a.forEach(p),r=C(t);for(let l=0;l<e.length;l+=1)e[l].l(t);s=C(t),w(i.$$.fragment,t),this.h()},h(){document.title="Monthly charges - Settings - Template",D(n,"name","description"),D(n,"content","Template definitions")},m(t,a){E(document.head,n),$(t,r,a);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,a);$(t,s,a),k(i,t,a),f=!0},p(t,[a]){a&31&&(u=R(t[1].template.charges),J(),e=ne(e,a,_,1,t,u,c,s.parentNode,ae,B,s,W),G());const l={};a&4096&&(l.$$scope={dirty:a,ctx:t}),i.$set(l)},i(t){if(!f){for(let a=0;a<u.length;a+=1)h(e[a]);h(i.$$.fragment,t),f=!0}},o(t){for(let a=0;a<e.length;a+=1)g(e[a]);g(i.$$.fragment,t),f=!1},d(t){t&&(p(r),p(s)),p(n);for(let a=0;a<e.length;a+=1)e[a].d(t);b(i,t)}}}function pe(o,n,r){let e;Z(o,I,l=>r(1,e=l));let c=null;function s(l){c===l?r(0,c=null):r(0,c=l)}function i(l){T(L,{item:e.template.charges.find(m=>m.id===l),onValidate:m=>{r(0,c=null);const v=e.template.charges.findIndex(X=>X.id===l);P(I,e.template.charges[v]=m,e),U()}},{replace:!0})}function f(l){T(re,{onDelete:()=>{r(0,c=null),P(I,e.template.charges=e.template.charges.filter(m=>m.id!==l),e),U()}},{replace:!0})}function u(){r(0,c=null),T(L,{title:"Create a charge",onValidate:l=>{P(I,e.template.charges=[...e.template.charges,{...l,id:crypto.randomUUID(),paid:!1}].toSorted((m,v)=>v.value-m.value),e),U()}},{replace:!0})}return[c,e,s,i,f,u,l=>s(l.id),l=>i(l.id),l=>f(l.id)]}class ye extends x{constructor(n){super(),ee(this,n,pe,me,Y,{})}}export{ye as component,we as universal};
