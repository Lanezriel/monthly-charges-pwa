import{g as se,R as le}from"../chunks/roundCheck.09e24eeb.js";import{b as re}from"../chunks/paths.f646b44b.js";import{s as ie,j as R,k as ae,n as q}from"../chunks/scheduler.b5980d7e.js";import{S as oe,i as ce,g as S,s as V,e as M,E as fe,h as U,f as $,c as T,k as j,z as D,a as y,t as b,b as A,d as k,p as N,A as ue,r as w,u as E,v as C,w as I,q as B,m as z,j as H,n as L,o as O}from"../chunks/index.ffe372b4.js";import{d as G,j as F,g as W,a as J,u as me,o as _e,b as pe,s as de}from"../chunks/index.7d3b724e.js";import{U as K}from"../chunks/UpdateCharge.4f27419e.js";import{D as he,I as Q,a as $e,P as X}from"../chunks/plusRounded.ba871955.js";import{I as ee,a as te}from"../chunks/ItemEntry.8e9b7023.js";import{E as ge}from"../chunks/edit.ffce0ce6.js";async function ke({params:a}){const n=(await se("entries")).find(t=>t.id===a.id);return{title:n?n.name:"404 Not Found",type:"sub",backURL:`${re}/`,editable:!0,entry:n}}const Re=Object.freeze(Object.defineProperty({__proto__:null,load:ke},Symbol.toStringTag,{value:"Module"}));function Y(a,e,n){const t=a.slice();return t[14]=e[n],t}function be(a){let e,n='<h2 class="svelte-1btvh43">Oops!</h2> <p class="svelte-1btvh43">The entry you are looking for doesn&#39;t seem to exist.</p>';return{c(){e=S("div"),e.innerHTML=n,this.h()},l(t){e=U(t,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1k11ina"&&(e.innerHTML=n),this.h()},h(){j(e,"class","oops svelte-1btvh43")},m(t,r){y(t,e,r)},p:q,i:q,o:q,d(t){t&&$(e)}}}function ve(a){let e=[],n=new Map,t,r,l,s=J(a[1].charges);const c=i=>i[14].id;for(let i=0;i<s.length;i+=1){let f=Y(a,s,i),o=c(f);n.set(o,e[i]=x(o,f))}return r=new ee({props:{$$slots:{default:[Ie]},$$scope:{ctx:a}}}),{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=V(),w(r.$$.fragment)},l(i){for(let f=0;f<e.length;f+=1)e[f].l(i);t=T(i),E(r.$$.fragment,i)},m(i,f){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(i,f);y(i,t,f),C(r,i,f),l=!0},p(i,f){f&126&&(s=J(i[1].charges),N(),e=me(e,f,c,1,i,s,n,t.parentNode,_e,x,t,Y),A());const o={};f&131072&&(o.$$scope={dirty:f,ctx:i}),r.$set(o)},i(i){if(!l){for(let f=0;f<s.length;f+=1)k(e[f]);k(r.$$.fragment,i),l=!0}},o(i){for(let f=0;f<e.length;f+=1)b(e[f]);b(r.$$.fragment,i),l=!1},d(i){i&&$(t);for(let f=0;f<e.length;f+=1)e[f].d(i);I(r,i)}}}function Z(a){let e,n,t;var r=le;function l(s,c){return{}}return r&&(e=B(r,l())),{c(){e&&w(e.$$.fragment),n=M()},l(s){e&&E(e.$$.fragment,s),n=M()},m(s,c){e&&C(e,s,c),y(s,n,c),t=!0},i(s){t||(e&&k(e.$$.fragment,s),t=!0)},o(s){e&&b(e.$$.fragment,s),t=!1},d(s){s&&$(n),e&&I(e,s)}}}function ye(a){let e,n=a[14].name+"",t,r,l,s,c=a[14].value+"",i,f,o=a[3].currency+"",u,p,h,_=a[14].paid&&Z();return{c(){e=S("h2"),t=z(n),r=V(),l=S("div"),s=S("p"),i=z(c),f=V(),u=z(o),p=V(),_&&_.c(),this.h()},l(d){e=U(d,"H2",{class:!0});var v=H(e);t=L(v,n),v.forEach($),r=T(d),l=U(d,"DIV",{class:!0});var m=H(l);s=U(m,"P",{class:!0});var g=H(s);i=L(g,c),f=T(g),u=L(g,o),g.forEach($),p=T(m),_&&_.l(m),m.forEach($),this.h()},h(){j(e,"class","svelte-1btvh43"),j(s,"class","svelte-1btvh43"),j(l,"class","right svelte-1btvh43")},m(d,v){y(d,e,v),D(e,t),y(d,r,v),y(d,l,v),D(l,s),D(s,i),D(s,f),D(s,u),D(l,p),_&&_.m(l,null),h=!0},p(d,v){(!h||v&2)&&n!==(n=d[14].name+"")&&O(t,n),(!h||v&2)&&c!==(c=d[14].value+"")&&O(i,c),(!h||v&8)&&o!==(o=d[3].currency+"")&&O(u,o),d[14].paid?_?v&2&&k(_,1):(_=Z(),_.c(),k(_,1),_.m(l,null)):_&&(N(),b(_,1,1,()=>{_=null}),A())},i(d){h||(k(_),h=!0)},o(d){b(_),h=!1},d(d){d&&($(e),$(r),$(l)),_&&_.d()}}}function we(a){let e,n,t,r,l,s;function c(){return a[9](a[14])}e=new te({props:{clickCallback:c,$$slots:{default:[ye]},$$scope:{ctx:a}}});function i(){return a[10](a[14])}t=new Q({props:{type:"edit",isVisible:a[2]===a[14].id,clickCallback:i,icon:ge}});function f(){return a[11](a[14])}return l=new Q({props:{type:"delete",isVisible:a[2]===a[14].id,clickCallback:f,icon:$e}}),{c(){w(e.$$.fragment),n=V(),w(t.$$.fragment),r=V(),w(l.$$.fragment)},l(o){E(e.$$.fragment,o),n=T(o),E(t.$$.fragment,o),r=T(o),E(l.$$.fragment,o)},m(o,u){C(e,o,u),y(o,n,u),C(t,o,u),y(o,r,u),C(l,o,u),s=!0},p(o,u){a=o;const p={};u&2&&(p.clickCallback=c),u&131082&&(p.$$scope={dirty:u,ctx:a}),e.$set(p);const h={};u&6&&(h.isVisible=a[2]===a[14].id),u&2&&(h.clickCallback=i),t.$set(h);const _={};u&6&&(_.isVisible=a[2]===a[14].id),u&2&&(_.clickCallback=f),l.$set(_)},i(o){s||(k(e.$$.fragment,o),k(t.$$.fragment,o),k(l.$$.fragment,o),s=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),b(l.$$.fragment,o),s=!1},d(o){o&&($(n),$(r)),I(e,o),I(t,o),I(l,o)}}}function x(a,e){let n,t,r;return t=new ee({props:{$$slots:{default:[we]},$$scope:{ctx:e}}}),{key:a,first:null,c(){n=M(),w(t.$$.fragment),this.h()},l(l){n=M(),E(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,s){y(l,n,s),C(t,l,s),r=!0},p(l,s){e=l;const c={};s&131086&&(c.$$scope={dirty:s,ctx:e}),t.$set(c)},i(l){r||(k(t.$$.fragment,l),r=!0)},o(l){b(t.$$.fragment,l),r=!1},d(l){l&&$(n),I(t,l)}}}function Ce(a){let e,n,t;var r=X;function l(s,c){return{}}return r&&(e=B(r,l())),{c(){e&&w(e.$$.fragment),n=M()},l(s){e&&E(e.$$.fragment,s),n=M()},m(s,c){e&&C(e,s,c),y(s,n,c),t=!0},p(s,c){if(r!==(r=X)){if(e){N();const i=e;b(i.$$.fragment,1,0,()=>{I(i,1)}),A()}r?(e=B(r,l()),w(e.$$.fragment),k(e.$$.fragment,1),C(e,n.parentNode,n)):e=null}},i(s){t||(e&&k(e.$$.fragment,s),t=!0)},o(s){e&&b(e.$$.fragment,s),t=!1},d(s){s&&$(n),e&&I(e,s)}}}function Ie(a){let e,n;return e=new te({props:{clickCallback:a[7],centered:!0,$$slots:{default:[Ce]},$$scope:{ctx:a}}}),{c(){w(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){C(e,t,r),n=!0},p(t,r){const l={};r&131072&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Ee(a){let e,n,t,r,l,s,c;document.title=e="Monthly charges - "+a[0].title;const i=[ve,be],f=[];function o(u,p){return u[1]?0:1}return r=o(a),l=f[r]=i[r](a),{c(){n=S("meta"),t=V(),l.c(),s=M(),this.h()},l(u){const p=fe("svelte-zeh83q",document.head);n=U(p,"META",{name:!0,content:!0}),p.forEach($),t=T(u),l.l(u),s=M(),this.h()},h(){j(n,"name","description"),j(n,"content","Template definitions")},m(u,p){D(document.head,n),y(u,t,p),f[r].m(u,p),y(u,s,p),c=!0},p(u,[p]){(!c||p&1)&&e!==(e="Monthly charges - "+u[0].title)&&(document.title=e);let h=r;r=o(u),r===h?f[r].p(u,p):(N(),b(f[h],1,1,()=>{f[h]=null}),A(),l=f[r],l?l.p(u,p):(l=f[r]=i[r](u),l.c()),k(l,1),l.m(s.parentNode,s))},i(u){c||(k(l),c=!0)},o(u){b(l),c=!1},d(u){u&&($(t),$(s)),$(n),f[r].d(u)}}}function Me(a,e,n){let t,r,l;R(a,pe,m=>n(8,t=m)),R(a,G,m=>n(12,r=m)),R(a,de,m=>n(3,l=m));let{data:s}=e,c=s.entry,i;function f(){const m=r.findIndex(g=>g.id===c.id);ae(G,r[m]=c,r)}function o(m){if(t)i===m.id?n(2,i=null):n(2,i=m.id);else{const g=c.charges.findIndex(P=>P.id===m.id);n(1,c.charges[g]={...m,paid:!m.paid},c)}}function u(m){F(K,{item:c.charges.find(g=>g.id===m),onValidate:g=>{n(2,i=null);const P=c.charges.findIndex(ne=>ne.id===m);n(1,c.charges[P]=g,c),W()}},{replace:!0})}function p(m){F(he,{onDelete:()=>{n(2,i=null),n(1,c.charges=c.charges.filter(g=>g.id!==m),c),W()}},{replace:!0})}function h(){F(K,{title:"Create a charge",onValidate:m=>{n(1,c.charges=[...c.charges,{...m,id:crypto.randomUUID(),paid:!1}].toSorted((g,P)=>P.value-g.value),c),W()}},{replace:!0})}const _=m=>o(m),d=m=>u(m.id),v=m=>p(m.id);return a.$$set=m=>{"data"in m&&n(0,s=m.data)},a.$$.update=()=>{a.$$.dirty&256&&(t||n(2,i=null)),a.$$.dirty&2&&f()},[s,c,i,l,o,u,p,h,t,_,d,v]}class qe extends oe{constructor(e){super(),ce(this,e,Me,Ee,ie,{data:0})}}export{qe as component,Re as universal};
